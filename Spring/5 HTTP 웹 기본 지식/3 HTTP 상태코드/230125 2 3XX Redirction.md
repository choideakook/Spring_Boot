# 3XX Redirction

🔗 HTTP 상태 코드

## ✏️ redircetoin

웹 브라우저에서 3XX 응답의 결과에 Location header 가 있을경우 Location 위치로 자동 이동 하는 기능

- url 이 변경되었지만 사용자가 변경전 url 에 접속하는 경우

![s5251.png](3XX%20Redirction%2020701c9acc4d49549a52be39cf8ca483/s5251.png)

### 1. 영구 리다이렉션

- 특정 리소스의 URI 가 영구적으로 이동
- /members → /users
- /event → /new-event

### 2. 일시 다이렉션

- URI 가 일시적으로 변경되는 경우
- 주문 완료 후 주문 내역 화면으로 이동
- PRG : Post/Redirect/Get

### 3. 특수 리다이렉션

- 결과 대신 캐시를 사용

<br>

## ✏️ 1. 영구 리다이렉션

301, 308

- 리소스의 URI 가 영구적으로 이동한 경우
- 기존의 URI 를 사용하지 않는경우
    - 검색 엔진 등에서도 변경을 인지하고 있음

### 📍 301 Moved Permanently

- 리다이렉트시 요청 method 가 GET 으로 변하고, 본문이 제거될 수 있음
    - 새로운 url 로 리다이렉트 하고 다시 요청할 때 GET 으로 변경된다는 뜻
    - method 가 변경이 안되고 유지되는 경우도 있다.
- 만약 기존 url 에서 POST 를 하기위해 정보를 입력했을 경우 GET 으로 변경되었기 때문에 처음부터 다시 입력해야되는 상황이 발생한다.

### 📍 308 Permanent Redircdt

- 301 과 기능은 같음
- 리다이렉트시 요청 method 와 본문 유지
- 처음 POST 를 보내면 리다이렉트도 POST 가 유지됨 (301 과의 차이점)
- POST 를 그대로 유지되기 때문에 변경된 url 에 정보를 그대로 보존해서 요청할 수 있다.
- 실무에서는 url 이 변경되면 post 해야하는 정보도 변경이 되어서 실무적으로 유용한 기능은 아니다.

<br>

## ✏️ 일시적인 리다이렉션

302, 307, 303

- 리소스의 URI 가 일시적으로 변경되는 경우
- 검색 엔진 등에서 URL 을 변경하면 안됨

### 📍 302 Found

- 리다이렉트 요청 method 가 GET 으로 변하고, 본문이 제거 될 수 있음
    - 301 과 같은 경우임

### 📍 307 Temporary Redirect

- 302 와 같은 기능
- 리다이렉트 요청 Method 와 본문 유지 (요청 method 를 변경하면 안된다.)
    - 308 과 비슷한 경우

### 📍 303 See Other

- 302 와 같은 기능
- 리다이렉트 요청 method 가 GET 으로 변경
    - 반드시 변경됨

<br>

## ✏️ PRG : Post Redirect Get

### 📍 필요성

POST 로 새로운 주문을 하고 200 OK 를 응답 받은후 새로고침 할경우

사용자는 모르겠지만 POST 가 마지막 요청이기 때문에 한번 더 message 가 요청되고 주문이 한번 더 들어간 후 200 OK 가 응답되는 문제가 발생한다

❗️ 새로고침은 마지막에 했던 요청을 한번 더 보내는 기능이다.

<br>

### 📍 PRG 로 해결

POST 로 주문한 결과를 GET method 로 자동 리다이렉트 해놓으면 마지막 요청이 GET 으로 바뀌고

새로고침해도 다시 GET 으로 조회되어 중복 주문 문제가 발생하지 않게된다.

- 사용자가 주문을 완료할경우 200 OK 가 응답되지 않고 302 나 303 이 발생되고 리다이렉트함
- GET 으로 다시 method 가 보내지고 200 OK 로 응답하게됨

<br>

## ✏️ 기타 리다이렉션

300, 304

### 📍300 Multiple Choices 실무에서는 사용하지 않는 기능이다.

### 📍304 Not Modified

- 케시를 목적으로 사용됨
- 클라이언트에게 리소스가 수정되지 않았음을 알려준다.
    - 클라이언트는 로컬 PC 에 자장된 캐시를 재사용 (캐시로 리다이렉트) 하게된다.
- 304 응답은 로컬 캐시를 사용해야 하므로 응답 message 에 바디를 포함하면 안된다.
- 조건부 GET, HEAD 요청시 사용