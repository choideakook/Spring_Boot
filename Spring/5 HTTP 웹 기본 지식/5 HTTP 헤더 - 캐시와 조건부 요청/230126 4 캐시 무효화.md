# 캐시 무효화

절대로 캐시가 저장되어서는 안되는 경우에 캐시 무효화를 해야한다.

- 디폴트 값이 캐시 생성이라 별도 처리를 하지않을경우 캐시가 되어버린다.
- 현재 사용자의 통장 잔고
- 민감한 개인정보 등등..

## ✏️ Cache-Control
확실한 캐시 무효화 응답

### 📍 Cache-Control: no-cache

- 데이터는 캐시해도 되지만, 항상 ORIGIN 서버에 검증하고 사용
- ORIGIN 서버는 외국 서버일경우 프록시 서버가 아닌 본토에 있는 원 서버를 뜻한다.
- ORIGIN 서베에 접근이 실패할 경우 설정에 따라 프록시 서버에서 200 OK 를 응답해버릴 수 도 있다.

⚠️ 만약 계좌에 이체가 됬는데 ORIGIN 서버에 접근이 실패해서 프록시 서버가 임의로 200 OK 를 해버리면 계좌 업데이트가 안된다.

- 이러한 문제 때문에 이런 설정을 안하거나 기능을 잘 사용하지 않는다.

### 📍 Cache-Control: no-store

- data 에 민감한 정보가 있으므로 저장하면 안됨
- 메모리에서 사용하고 최대한 빨리 삭제하라는 의미

### 📍 Cache-Control: must-revalidate

- 캐시 만료후 최초 조회시 ORIGIN 서버에 검증 해야함
- ORIGIN 서버 접근이 실패할 경우 반드시 오류가 발생해야함
    - 504 Gateway Timeout
    - no-cache 의 문제점을 해결할 수 있다.

### 📍Pragma: no-cache

- HTTP 1.0 버전일 경우엔 Pragma 를 사용해야 한다.