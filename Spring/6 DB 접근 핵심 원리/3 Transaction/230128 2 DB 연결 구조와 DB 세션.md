# DB 연결 구조와 DB 세션

<br>

![s631.png](DB%20%E1%84%8B%E1%85%A7%E1%86%AB%E1%84%80%E1%85%A7%E1%86%AF%20%E1%84%80%E1%85%AE%E1%84%8C%E1%85%A9%E1%84%8B%E1%85%AA%20DB%20%E1%84%89%E1%85%A6%E1%84%89%E1%85%A7%E1%86%AB%20a8b959647bfc4b5b8b459b1f45a0e226/s631.png)

1. 사용자는 클라이언트를 사용해 DB 서버에 접근할 수 있다.
    - DB 서버 입장에선 클라이언트가 application 서버 (WAS) , DB 접근툴 등을 의미한다.
2. 클라이언트는 DB 서버에 연결을 요청하고 Connection 을 맺게 된다.
3. DB 서버는 내부에 세션이라는 것을 만들다.
    - 이후에 Connection 을 통한 모든 요청은 세션을 통해서 실행하게 된다.

```java
클라이언트 : 커넥션 --SQL--> DB

// DB 내부
커넥션 --SQL--> 세션 => 세션은 SQL 을 싱행시킴
```

1. 세션은 Transaction 을 시작하고, 커밋 또는 롤백을 통해 Transaction 을 종료한다.
2. 이후엔 새로운 Transaction 을 다시 시작할 수 있다.
3. 사용자가 Connection 을 닫거나, DB 관리자 (DBA) 가 세션을 강제로 종료하면 세션은 종료된다.

<br>

![s632.png](DB%20%E1%84%8B%E1%85%A7%E1%86%AB%E1%84%80%E1%85%A7%E1%86%AF%20%E1%84%80%E1%85%AE%E1%84%8C%E1%85%A9%E1%84%8B%E1%85%AA%20DB%20%E1%84%89%E1%85%A6%E1%84%89%E1%85%A7%E1%86%AB%20a8b959647bfc4b5b8b459b1f45a0e226/s632.png)

Connection Pool 이 10 개의 Connection 을 생성하면,
세션도 10개가 만들어진다.

- 각각의 Connection 은 각각의 세션을 통해 작동되고 각겍의 세션은 격리성을 갖게된다.
- 🔗 격리성 Isolation